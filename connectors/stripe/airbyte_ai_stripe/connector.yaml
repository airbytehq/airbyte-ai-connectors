openapi: 3.1.0
info:
  title: Stripe API Connector
  version: 0.1.1
  description: |
    Stripe is a payment processing platform that enables businesses to accept payments,
    manage subscriptions, and handle financial transactions. This connector provides
    access to customers for payment analytics and customer management.
  x-airbyte-connector-name: stripe
  x-airbyte-connector-id: e094cb9a-26de-4645-8761-65c0c425d1de
  x-airbyte-external-documentation-urls:
    - title: Stripe API Changelog documentation
      type: changelog
      url: "https://docs.stripe.com/changelog"
    - title: Stripe API Upgrades documentation
      type: migration_guide
      url: "https://docs.stripe.com/upgrades"
    - title: Stripe API Versioning documentation
      type: api_release_history
      url: "https://docs.stripe.com/api/versioning"
    - title: Stripe API Reference documentation
      type: api_reference
      url: "https://docs.stripe.com/api"
    - title: Stripe API Authentication documentation
      type: authentication_guide
      url: "https://docs.stripe.com/api/authentication"
  x-airbyte-example-questions:
    supported:
      - "Show me my top 10 customers by total revenue this month"
      - "List all customers who have spent over $5,000 in the last quarter"
      - "Analyze payment trends for my Stripe customers"
      - "Identify which customers have the most consistent subscription payments"
      - "Give me insights into my customer retention rates"
      - "Summarize the payment history for [customerX]"
      - "Compare customer spending patterns from last month to this month"
      - "Show me details about my highest-value Stripe customers"
      - "What are the key financial insights from my customer base?"
      - "Break down my customers by their average transaction value"
    unsupported:
      - "Create a new customer profile in Stripe"
      - "Update the billing information for [customerX]"
      - "Delete a customer record"
      - "Send a payment reminder to [customerX]"
      - "Schedule an automatic invoice for [Company]"

servers:
  - url: https://api.stripe.com
    description: Stripe API Server

security:
  - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      description: API Key authentication using Bearer token

  schemas:
    Customer:
      type: object
      x-airbyte-entity-name: customers
      properties:
        id:
          type: string
          description: Unique identifier for the customer
        object:
          type: string
          description: String representing the object's type
          enum: [customer]
        email:
          type: string
          format: email
          description: Customer's email address
        name:
          type: string
          description: Customer's full name
        description:
          type: [string, "null"]
          description: An arbitrary string attached to the customer
        phone:
          type: [string, "null"]
          description: Customer's phone number
        address:
          type: [object, "null"]
          description: Customer's address
          properties:
            line1:
              type: string
            line2:
              type: string
            city:
              type: string
            state:
              type: string
            postal_code:
              type: string
            country:
              type: string
        metadata:
          type: object
          additionalProperties:
            type: string
          description: Set of key-value pairs for storing additional information
        created:
          type: integer
          format: int64
          description: Time at which the customer was created (Unix timestamp)
        balance:
          type: integer
          description: Current balance, if any
        delinquent:
          type: boolean
          description: Whether the customer has a delinquent balance
        currency:
          type: [string, "null"]
          description: Three-letter ISO currency code
        default_currency:
          type: [string, "null"]
          description: Default currency for the customer
        default_source:
          type: [string, "null"]
          description: ID of the default payment source
        discount:
          type: [object, "null"]
          description: Discount currently applied to the customer
        invoice_prefix:
          type: [string, "null"]
          description: Prefix for invoice numbers
        invoice_settings:
          type: [object, "null"]
          description: Invoice settings for the customer
        livemode:
          type: boolean
          description: Whether the customer exists in live mode or test mode
        next_invoice_sequence:
          type: [integer, "null"]
          description: The sequence to be used on the next invoice
        preferred_locales:
          type: [array, "null"]
          items:
            type: string
          description: Customer's preferred languages
        shipping:
          type: [object, "null"]
          description: Shipping information for the customer
        tax_exempt:
          type: [string, "null"]
          description: Tax exemption status
        test_clock:
          type: [string, "null"]
          description: ID of the test clock
      required:
        - id
        - object

    CustomerList:
      type: object
      properties:
        object:
          type: string
          enum: [list]
        data:
          type: array
          items:
            $ref: "#/components/schemas/Customer"
        has_more:
          type: boolean
        url:
          type: string

paths:
  /v1/customers:
    get:
      summary: List all customers
      description: Returns a list of customers
      operationId: Customers_List
      x-airbyte-entity: customers
      x-airbyte-action: list
      tags:
        - Customers
      parameters:
        - name: limit
          in: query
          description: A limit on the number of objects to be returned
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - name: starting_after
          in: query
          description: A cursor for use in pagination
          schema:
            type: string
        - name: ending_before
          in: query
          description: A cursor for use in pagination
          schema:
            type: string
        - name: email
          in: query
          description: Filter customers by email address
          schema:
            type: string
      responses:
        "200":
          description: List of customers
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomerList"

  /v1/customers/{id}:
    get:
      summary: Get a customer
      description: Gets the details of an existing customer
      operationId: Customers_Get
      x-airbyte-entity: customers
      x-airbyte-action: get
      tags:
        - Customers
      parameters:
        - name: id
          in: path
          required: true
          description: The customer ID
          schema:
            type: string
      responses:
        "200":
          description: Customer retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
